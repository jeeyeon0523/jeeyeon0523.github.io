---
layout: post
title: 전문성도 없고 맥락도 없는 클라우드 아키텍쳐링
subtitle: terraform 코드로 aws에 인프라 만들어보기
categories: infra
tags: [infra, aws, terraform]
---

## 테라폼 알아보기
IaC를 가능하게 하는 언어?, 툴?, 프레임워크? 어쩄든 그것들 중 하나.

클라우드 인프라 아키텍쳐를 구성하는데 가장 보편적으로 쓰이는 것 같다.

아키텍쳐를 구성하고자하는 프로젝트 폴더 아래에 존재하는 .tf 확장자로 이뤄진 파일들을 한데 긁어모아 자동으로 구성해준다고 한다. 

### 기본 테라폼 명령어
* init : 초기 설정, state 설정
* plan : 앞으로 변화될 값을 알려줌
* apply : 작성한 인프라 코드를 실행하여 실제 인프라를 구성해줌

### 테라폼 언어..?
크게 terraform, provider, resource 예약어가 있고
디테일 한 내용들은 알 수 없지만 (일단은 하나하나 파지 않고 넘어간다.)

* terraform : 테라폼으로 인프라 구성을 시작하겠다~
* provider : aws, gcp등 플랫폼 설정을 넣어줌
* resource : (aws 기준) ec2나 vpc 등등 앞으로 우리가 사용하고자하는 aws service들은 resource 예약어를 이용해 생성함.

대충 이런 느낌으로 사용한다. 

## 아키텍쳐 구성하기
### aws 계정정보
**aws provider 설정 = aws 계정정보 설정하기** 라고 생각하면 된다.

계정정보를 설정하는 방법은 크게 직접 입력하기, 파일에서 읽어오기, aws cli에 로그인 되어 있게 하기..? 이렇게 세가지 방법이 있는데 일단 보안 따위는 무시하고 계정정보를 직접 입력해서 이 단계를 넘어가보자.

참고 : 해당단계를 진행하기 위해서는 적절한 권한을 가진 iam 사용자를 만들어서 액세스키와 비밀 액세스키를 할당 받아야함.

이미지

### vpc와 subneet 만들기
vpc : 기존에 우리가 알던 "네트워크" 개념이라고 이해하면 쉽다.




